#!/bin/bash

# --- LOADER ---
if [[ $(ps -o args= -p $$) == *"bash -x"* || $(ps -o args= -p $$) == *"sh -x"* ]]; then
    echo "Debugging is not allowed." >&2
    exit 1
fi

__run_protected() {
    local encrypted_content='U2FsdGVkX18EW+kfP/8ZF8YBzjctNJZJsoJQQnkxtW0ZJ6oXzeTRiNISm/BELcEAPuoM5ni2YHE5t+05UCopNDaqVUO3BslgtgnG7xdTa9bk4vBv8KIuo8m/K53cQlA7WR7/gYtaOgqZKGu+RG8hJhk4smVCHx2WLRVtgKTB4BHq/NV5AY1RLe33Y3rAK1byY3ol5fyN8hcjjZxKhgG5JpaelMTd1FzjND1vI6oYl9zPC2c+PGLLstD/U1VcKpT+tp98e/VJkfPC5GDbKFfYIYDSxnHU6M+YSctSXPcKmARD5+fHXhHujtXhWTqtf5sZsKBcc/xuYDjmx//0L0mrvT2KNpfHBY+XXtYLX0QCGKr/S92yJU1WBIi8AXars5ZTFyhIEPBaWrNF2F7asFtsMgsIQP7ZhuSoQTbgAWjHFwY4G+lcPaMMZAkbhut+FckhVP5x+yFpi9NWRUxCKtsDy4tDb6qdzulMR3LZYasWk7uNE0xy7ClqBmxjx+R51/ANw8leXqhe4tbsRv31kK5aDVcN0FUFmqBvJAvEVieygIot8DTEdP7gevrkMJeJsY11aj4JT78wRGQfdTJJE3eu1zJ6Yukf7EoeBLXFb3QBmyuMp08uJRvRel+umZa8too2myEUwNiG6gEfXN0eMFd8KkJmHRiWMWXXx88Y60bZWolLma7OP+V/rIyCxYotlI9OZlSljDnxz7sFsHveeGJPZ5nCZetbcy13oxS72Ppdxddb78xhsgzhsgQf2mGNBvszpMsds4szgaBphLCqOHwtrD3XmuUtHud4WLs6C+ZG6OoQqC9kZ4imUcVK1Z4CvY/Jab2kgDyWh1FCxT4PcZTwj1TlhFj/0UTvqE4fGyOiKmWSme5iWCTKTVjNQ0Gg3b+4tWWcZrL1Ende2CP1RAcPRF5FAzpM9YqSXwib9danz7cfSuSqKiQBKCkwrNaJnm2iUuQC1tjTzsj/GHc9ygigtaHHPAvrCb8oaktqaEvV5UGs6H9FFKGRqO9fCjIxoEOyOl+5FVWjABeTAIgxKBstDYAoSLjnEF0lVJz1PnhX95LO3Uuh/O3HSg8POecOMLSPqwYQMij7fEmTzHik/bZ1BF7tTaIlSwCfTkt6bSwIuB28oPwk+cr+JIT/2CQq/QM/4C5sxcX5yNjICUqQRdajNg+28G6tE43zDQjQ+lwnNk0Yv2U7jy3we/6mokBu3If4ngGqCmqlVZUrCNNDuMVlm6egF0did6MvPnVjV+IkTHQ+mocjcyi0GJsDaEHegpFrYtOowlYopxjqScx9xtkuFoWlaiO3zSiyhZVQIE9blOuwkHnHqhtKpW/SmKIgYJ9ZL4NZl29fRfXIkj2kuSMQKv18UIm7SKZLUEyQTvLTr0+kNPjTdRjc6wQkjnUAGC/k85jlWZvWpSDXDGQZXKF1Pt7UWmn7NIEG/D/kTcNxd718ER+Y565qOnoDWf0uHxKuNvI8E9TOP+/AyB2YiGJFuudJqT1nA9XKctFxLO/8Qn/qby1hal7MHyvYJTOMUvKGRikEtreo9HI3u0A3oYIjnV6RXBpIBdE+hMFW9srhLVyRhpKqPKu22GQg3T5HTqmUB5fHAp99zeOaYm3k0KJJpwhjXjdppF+/pchSiWmlP+pxLNMXc3yIimP205mqwau2cr8pVAQtQkCmG1bdbSYk9NTqxvT9rTGzfvVGNA/uEZosUpWpBnP1PP5iwqLBe56aA18xhALhlVcPzCrh+2oJtAGlqkjkm6Tv6mAuVklBvH6AxurlDcAFu2e/qNHX9rr9tCFrUWo01aoXAjAPv+P0YFNBJztIWPowM2eXZWG2rJxJEa3sOrwP6D9YVp6fvFZQK+ryPh65UUrEyW3lUiQN1sTI87cdI3QO8VuVr5j3ujPdUJ0AeHVClXqOZZnYK0TmXoJknuk4TU4C/MTDR46HngT6F+mCSCxZUxAgRN7ClETbMlz9D/0HQCOL9NEBqWc7Aeb0bP/GFbqdxZHXK9imb0w37djcBDjokLhBajlcOT0CZnp0ZnmsSXapV0AG9eGSLYIkpqhd6eawAM05F0G725dGwcs5AyaZM/aM1DTs7X3w49HkbUeg/OhTogDcDg95Oqe5q+XnfaiCG/S3HwuXpJDAKVOb1yumincGuQddZIQsMX6nUtxHI2cxc19G4QavayzBEL+reP4sWGawsjDe2RhBooSejqUPlfRtohwYaP1GWkrlt3JXyKRClqKExc4iaigWGVmD2dkINBGFDCIczWcHIFRqVjO6Mp5VFByckaVzlcsItuwrmOFuS4bU5eomQ2hPNqdNK0/EjTg+ZTamVQ9Top7sMNCPGP51m4mC7O+U55ggE2jDS9+OkXno5eYAf0z4ojru0KFYTV9SbpcnKQ8PLwrvoGWGk+o0YFiBR99uUjDT/lN/7w+RXzRe6Dm8r6c6boLp1lHw1p89nuKnlqurERyny3s+tRB+35zp70Oh0Eq6c4rjwqpn/ZM2+w/p9OPLrXuQyhQsemEL+rkPFFY76iyKGQQjfvImok1dIGGaY7bqXSvVbQecXhKqD25MzK4fJ/rA7qdO9qDvC5XTvIszppEK0jHJHrt93N7lyW4o55+UZXwrOJzq7MxFkIa6C98HNGrXp3KWcpJHYRHWHB8joFvocg0JuxYozcLJGtEswsY0W/PUbQkqps8qrjXDFKArdStTVg9yLHm720t40zhlGCK7iKjrPLFXp47NSs1f8PY7jBEDGS3Lr7H4ZjcugXbopAxjSQ2wFdcAUX92qt9yQgrR8aF9pmuSUCZFGsikxXzqHnZu4PmCRe2c35clKrZ71UqGwpJsLg9W85melU6B3yivJntC6//swq0vaOIxS4MdUP7iZHTFC2Qi4SRImDAxZVpUVQUDa2XaRshrrenoraCZa58q8awn7oenkDKBVp6VL30HfEkFJsJ6Qn3yqOYHuzROoCwyiDRlNTTrB/8NzrqO+zFM/hpaBzn4Fa1h/q0bI6VBieZPzeM1DEmEBp5Fno3uJvfj+Ey8gXBsyS+z2cKjobfNFfkrGcWLoPBjyBSo66SNqvPxBMEKDh/4jIhbubhlp4eGsJHENOTomT6BcrRH0r6PwfgIuYixuQpY34YJJ6cwcDh4KYtCOCxpf8zEBEADm3EuB5+oDOGTJrtG/oqB6WuIlUSHXLIyG70phG2fPjM5Z9J4qOxCUZrvEHPu1hfx8HhhGN/0RNkDF9IJOh5r/J8qZFg/ujzPvHQSqIvagSSdVIjCV1z681SzZuhYmrVcbGZqUuktJSd3XwEyQvdMqWu0rT54BlDsolbMQs/9gYaLtUtWe+C0kZFtXcCJ7dSHzN4aEGC9ZGpFcZVC+GB2sS0Uo441WLxEcIjf3fRCo4CemDJBWwDofLA413JuHrrqrrRV1gVPpCmc4P84cJstBYETkQLJZhpSN4v+C1bJ7CG2OWzgMELhGhYYCQKkXNwsT/W2vvtuPbegBq3ts21t12N03x+yE6xhUwBsNuitmikHzSvo/zqdPX7qmWcLn2xdkumk0MxO2FpMda+VYei7L71ZEgbXlpS7TuY='
    local obfuscated_key='MmIzNDJjYjJkYjEwYjJlMzdmZmNlYzBmY2JmNjUwZDlkYzE1NTU3MDUwMmFiZmM1ZGRlMjYzOWRmY2YxMDlhNg=='

    local decoded_key=$(echo "$obfuscated_key" | base64 -d)
    if [ -z "$decoded_key" ]; then
        echo "Error: Failed to decode key." >&2
        return 1
    fi

    local decrypted_content=$(echo "$encrypted_content" | base64 -d | openssl enc -d -aes-256-cbc -pbkdf2 -pass pass:"$decoded_key" 2>/dev/null)
    if [ -z "$decrypted_content" ]; then
        echo "Error: Decryption failed." >&2
        return 1
    fi

    # Bersihkan jejak sebelum eksekusi
    unset encrypted_content obfuscated_key decoded_key

    eval "$decrypted_content"
}

__run_protected
